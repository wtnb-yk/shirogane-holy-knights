# YouTube データ取得ツール 使用方法 (更新版)

## セットアップ
1. 必要なライブラリをインストール：
   ```
   pip install google-api-python-client pandas
   ```

2. YouTube Data API v3のAPIキーを取得：
   - Google Cloud Consoleにアクセス
   - 新しいプロジェクトを作成
   - YouTube Data API v3を有効化
   - 認証情報 > APIキーを作成

## 実行方法

### 方法1: 環境変数を使用
```bash
# APIキーを環境変数に設定
export YOUTUBE_API_KEY='あなたのAPIキー'

# スクリプトを実行
python youtube_data_fetcher.py
```

### 方法2: スクリプト内に直接APIキーを設定
スクリプトファイル(youtube_data_fetcher.py)を開き、以下の行を編集：
```python
API_KEY = os.environ.get('YOUTUBE_API_KEY', 'あなたのAPIキー')
```

その後、スクリプトを実行：
```bash
python youtube_data_fetcher.py
```

## 出力ファイル
スクリプトを実行すると、`work/result/{実行日時}_{ユニークID}/` ディレクトリに以下の5つのCSVファイルが生成されます：

1. `channels.csv` - チャンネル基本情報
   - id: チャンネルID
   - title: チャンネル名

2. `channel_details.csv` - チャンネル詳細情報
   - channel_id: チャンネルID
   - handle: チャンネルハンドル (@ShiroganeNoel)
   - description: チャンネル説明
   - subscriber_count: 登録者数
   - icon_url: アイコン画像URL

3. `archives.csv` - アーカイブ基本情報
   - id: 動画ID
   - title: 動画タイトル
   - published_at: 公開日時
   - channel_id: チャンネルID

4. `video_details.csv` - 動画詳細情報
   - archive_id: 動画ID
   - url: 動画URL
   - duration: 動画の長さ (HH:MM:SS形式)
   - thumbnail_url: サムネイルURL

5. `content_details.csv` - コンテンツ詳細情報
   - archive_id: 動画ID
   - description: 説明文
   - is_members_only: メンバーシップ限定かどうか

## 注意事項
- YouTube Data APIには1日あたりのクォータ制限があります。
- 大量の動画を取得する場合、APIキーの制限に達する可能性があります。
- DBにデータを取り込む際はCSVファイルの列とDBのテーブル構造が一致していることを確認してください。