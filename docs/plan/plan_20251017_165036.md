# SpecialEventCard デザイン改善実装計画

## プラン策定日時
2025-10-17 16:50:36

## 関連調査ファイル
- `docs/investigate/investigate_20251017_164544.md`

## 目的
SpecialEventCardのデザインを改善し、より実用的で魅力的なカードにする。

## 実装方針

### 原則
- 既存のデザインシステムを最大限活用する
- ユーザー要件を厳守する（ステータスバッジ不要、日付追加不要、endDate表示維持）
- NewsCardやStreamCardなどの既存カードデザインとの統一性を保つ
- アクセシビリティを維持する
- レスポンシブデザインを維持する

### 改善の方向性
1. **視覚的階層の強化**: タイトルと説明文のコントラストを明確にする
2. **装飾的要素の追加**: アクセントカラーやアイコンを活用する
3. **ホバーエフェクトの最適化**: 既存のcard-hover系クラスを活用する
4. **情報の視認性向上**: endDate表示にアイコンを追加する

## 詳細実装タスク

### Phase 1: 基本的な視覚改善（優先度：高）

#### Task 1-1: タイトルのスタイル強化
- **ファイル**: `frontend/src/features/specials/components/cards/internals/SpecialEventCardDescription.tsx`
- **変更内容**:
  - タイトルのフォントサイズを `text-xl` から `text-2xl` に変更
  - タイトルのウェイトを `font-bold` から `font-extrabold` に変更
  - タイトルの色を `text-text-primary` から `text-text-primary` に維持（コントラスト確保）
- **期待される効果**: タイトルの視認性と存在感が向上

#### Task 1-2: 説明文のスタイル最適化
- **ファイル**: `frontend/src/features/specials/components/cards/internals/SpecialEventCardDescription.tsx`
- **変更内容**:
  - 説明文の行制限を `line-clamp-3` から `line-clamp-4` に変更（より多くの情報を表示）
  - 説明文の色を `text-text-secondary` に維持
  - 説明文のmarginを調整
- **期待される効果**: 説明文の情報量と可読性が向上

#### Task 1-3: endDate表示の視覚的改善
- **ファイル**: `frontend/src/features/specials/components/cards/SpecialEventCard.tsx`
- **変更内容**:
  - lucide-reactから `Calendar` アイコンをインポート
  - endDate表示の前にCalendarアイコンを追加
  - アイコンとテキストの間に適切なスペースを設定
  - アイコンのサイズを `w-4 h-4` に設定
- **期待される効果**: 日付情報の視認性が向上

#### Task 1-4: カードの余白最適化
- **ファイル**: `frontend/src/features/specials/components/cards/SpecialEventCard.tsx`
- **変更内容**:
  - カードのパディングを `p-6` から `p-5` または `p-6` に維持（適切な余白確保）
  - 内部の `space-y-4` を `space-y-3` に変更（要素間の間隔調整）
- **期待される効果**: カード内の情報密度が最適化される

### Phase 2: 視覚的装飾の追加（優先度：中）

#### Task 2-1: カード左端のアクセントボーダー追加
- **ファイル**: `frontend/src/features/specials/components/cards/SpecialEventCard.tsx`
- **変更内容**:
  - InteractiveCardのclassNameに `border-l-4 border-accent-gold` を追加
  - または、状態に応じたボーダーカラー（upcoming: blue, active: gold, ended: gray）
- **期待される効果**: カードの視覚的なアクセントが追加され、魅力が向上

#### Task 2-2: 背景のグラデーション追加
- **ファイル**: `frontend/src/features/specials/components/cards/SpecialEventCard.tsx`
- **変更内容**:
  - InteractiveCardのclassNameに微細なグラデーション背景を追加
  - `bg-gradient-to-br from-bg-primary to-bg-secondary/30` などの検討
  - または、既存の `bg-bg-primary` を維持し、シャドウで立体感を出す
- **期待される効果**: カードに深みと立体感が追加される

#### Task 2-3: ホバーエフェクトの最適化
- **ファイル**: `frontend/src/features/specials/components/cards/SpecialEventCard.tsx`
- **変更内容**:
  - InteractiveCardの `hoverScale` プロパティを `sm` から `md` に変更（より強調されたホバー）
  - または、カスタムホバークラスを追加
- **期待される効果**: ホバー時の視覚的フィードバックが向上

### Phase 3: Skeleton更新と最終調整（優先度：中）

#### Task 3-1: SkeletonSpecialEventCardの更新
- **ファイル**: `frontend/src/features/specials/components/cards/SkeletonSpecialEventCard.tsx`
- **変更内容**:
  - タイトルのスケルトンサイズを調整（`h-6` → `h-7` または `h-8`）
  - 説明文のスケルトン行数を調整（3行 → 4行）
  - endDate表示部分にアイコン用のスケルトンを追加
  - 左端ボーダーを追加（本体と同じスタイル）
- **期待される効果**: SkeletonとActualカードの見た目が統一される

#### Task 3-2: レスポンシブ対応の確認
- **ファイル**: 全ての変更ファイル
- **変更内容**:
  - モバイル、タブレット、デスクトップでの表示確認
  - 必要に応じて、レスポンシブクラスの追加（`md:`, `lg:` など）
- **期待される効果**: 全てのデバイスで適切に表示される

#### Task 3-3: 他のカードとの統一性確認
- **ファイル**: 確認のみ
- **変更内容**:
  - NewsCard、StreamCardなどとの視覚的統一性を確認
  - グリッドレイアウト内での調和を確認
- **期待される効果**: サイト全体のデザイン統一性が保たれる

## ファイル変更計画

### 修正が必要なファイル

1. **`frontend/src/features/specials/components/cards/SpecialEventCard.tsx`**
   - 変更内容: endDate表示の改善、カードスタイルの最適化、アクセントボーダー追加
   - 変更規模: 中（約10-20行の変更）
   - 影響範囲: SpecialEventCardの表示のみ

2. **`frontend/src/features/specials/components/cards/internals/SpecialEventCardDescription.tsx`**
   - 変更内容: タイトルと説明文のスタイル強化
   - 変更規模: 小（約5-10行の変更）
   - 影響範囲: SpecialEventCardDescription内部のみ

3. **`frontend/src/features/specials/components/cards/SkeletonSpecialEventCard.tsx`**
   - 変更内容: 新しいデザインに合わせた更新
   - 変更規模: 小（約5-10行の変更）
   - 影響範囲: SkeletonSpecialEventCardの表示のみ

### 新規作成が必要なファイル
なし

### 削除が必要なファイル
なし

## テスト戦略

### 単体テスト
- 既存のコンポーネントテストが存在する場合は、変更に合わせて更新
- 現時点で単体テストがない場合は、本実装では単体テストの追加は行わない（別タスクとする）

### 統合テスト
- SpecialEventCardが正しくレンダリングされることを確認
- StaggeredItemとの統合が正常に機能することを確認

### E2Eテスト（Playwright MCPツール使用）
1. **視覚的確認テスト**
   - 手順:
     1. ブラウザでspecialsページ（`http://localhost:3001/specials`）にアクセス
     2. スクリーンショットを撮影し、デザインを確認
     3. ホバー効果を確認
   - 確認項目:
     - タイトルのフォントサイズとウェイトが適切か
     - 説明文の行制限が適切か
     - endDate表示にCalendarアイコンが表示されているか
     - 左端のアクセントボーダーが表示されているか
     - ホバー時のエフェクトが機能しているか

2. **レスポンシブデザイン確認テスト**
   - 手順:
     1. ブラウザのビューポートサイズを変更（モバイル、タブレット、デスクトップ）
     2. 各サイズでスクリーンショットを撮影
   - 確認項目:
     - 全てのデバイスサイズで適切に表示されるか
     - テキストのオーバーフローが発生していないか

3. **インタラクション確認テスト**
   - 手順:
     1. SpecialEventCardをクリック
     2. イベント詳細が表示されることを確認
   - 確認項目:
     - onEventClickコールバックが正常に機能するか

### テスト実施タイミング
- Phase 1完了後: 基本的な視覚改善の確認
- Phase 2完了後: 装飾的要素の確認
- Phase 3完了後: 最終的な統合確認

## リスク分析と対策

### リスク1: 他のカードとのデザイン統一性の喪失
- **影響度**: 中
- **発生確率**: 低
- **対策**:
  - NewsCardやStreamCardの既存デザインパターンを参考にする
  - globals.cssで定義されているカラーとエフェクトのみを使用する
  - Phase 3でデザイン統一性を確認する
- **緩和策**:
  - 問題が発見された場合は、装飾的要素を調整する

### リスク2: SkeletonとActualカードの見た目の乖離
- **影響度**: 中
- **発生確率**: 中
- **対策**:
  - Phase 3でSkeletonを同時に更新する
  - Skeletonのスタイルを本体と同期させる
- **緩和策**:
  - E2Eテストでローディング状態も確認する

### リスク3: アクセシビリティの低下
- **影響度**: 高
- **発生確率**: 低
- **対策**:
  - アイコンに適切なaria-labelを追加する
  - 色のコントラストを維持する
  - キーボード操作を維持する
- **緩和策**:
  - アクセシビリティツールで確認する

### リスク4: パフォーマンスの低下
- **影響度**: 低
- **発生確率**: 低
- **対策**:
  - 重いアニメーションやエフェクトは避ける
  - 既存の最適化されたコンポーネント（InteractiveCard、StaggeredItem）を維持する
- **緩和策**:
  - パフォーマンス問題が発見された場合は、エフェクトを軽量化する

### リスク5: レスポンシブデザインの破綻
- **影響度**: 中
- **発生確率**: 低
- **対策**:
  - Phase 3でレスポンシブ対応を確認する
  - 既存のレスポンシブクラスを維持する
- **緩和策**:
  - 問題が発見された場合は、レスポンシブクラスを追加する

## 技術的制約

### 遵守すべき点
1. 既存のInteractiveCardとStaggeredItemの構造を維持する
2. onEventClickコールバック機能を維持する
3. React.memoによる最適化を維持する
4. globals.cssで定義されているカラーシステムのみを使用する
5. lucide-react（v0.542.0）のアイコンのみを使用する

### データ構造の制約
- SpecialEventDtoは変更しない
- 既存のプロパティ（id, title, description, startDate, endDate, status）のみを使用する

## 実装順序

1. **Phase 1実装** → E2Eテスト → 問題なければ次へ
2. **Phase 2実装** → E2Eテスト → 問題なければ次へ
3. **Phase 3実装** → 最終E2Eテスト → 完了

## 期待される成果物

1. 視覚的に改善されたSpecialEventCard
2. 統一性を保ったSkeletonSpecialEventCard
3. Playwright MCPツールによる動作確認結果
4. 必要に応じて、スクリーンショットやE2Eテスト結果

## 次のステップ

1. 本プランの承認
2. Implementフェーズへ移行
3. Phase 1から順次実装
4. 各Phaseごとにテストを実施
5. 全Phase完了後、最終確認
6. コミット・プッシュ

## 備考

### 検討事項
- 画像やサムネイルの追加は、データ構造の変更が必要なため、本実装では含まない
- より複雑なレイアウト変更（NewsCardのような横並びレイアウト）は、本実装では含まない
- 状態（upcoming, active, ended）に応じたビジュアル変更は、要件に含まれていないため、本実装では含まない（将来の拡張として検討可能）

### 参考資料
- `docs/investigate/investigate_20251017_164544.md` - 調査結果
- `frontend/src/app/globals.css` - カラーシステムとエフェクト定義
- `frontend/src/features/news/components/cards/NewsCard.tsx` - 参考カード実装
- lucide-react documentation - アイコン使用方法

## 実装完了条件

1. Phase 1-3の全タスクが完了している
2. E2Eテストが全て成功している
3. SkeletonとActualカードの見た目が統一されている
4. レスポンシブデザインが正常に機能している
5. 他のカードとの視覚的統一性が保たれている
6. アクセシビリティが維持されている
