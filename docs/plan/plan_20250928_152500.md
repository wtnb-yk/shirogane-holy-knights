# 実装計画書: フッターモバイル背景表示問題

## プロジェクト概要
- **計画日時**: 2025-09-28 15:25:00
- **対象問題**: フッターが画面最下端まで表示されない問題
- **ブランチ**: feature/footer-mobile-background-fix
- **調査書**: docs/investigate/investigate_20250928_152345.md

## 実装戦略

### 核心アプローチ
**背景と内容の分離戦略**: footer要素レベルで背景を最下端まで拡張し、内部コンテンツのみSafeArea内配置

### 技術的方針
1. **構造的修正**: Footer.tsx内の階層構造調整によるCSS配置最適化
2. **SafeArea対応維持**: 既存の安全領域対応を保持しつつ背景拡張
3. **最小影響**: 既存システムへの影響を最小限に抑制

## 詳細実装タスク

### 🔴 高優先度タスク
1. **Footer.tsx構造修正**
   - **ファイル**: frontend/src/components/footer/Footer.tsx:8
   - **現在**: `<div className="w-full pt-4 pb-4 pb-safe px-4 sm:px-6 lg:pt-8 lg:pb-5 lg:px-10">`
   - **変更**: footer要素に`pb-env(safe-area-inset-bottom, 0)`適用、内部divから`pb-safe`除去
   - **予想時間**: 15分

2. **内部padding調整**
   - **対象**: 内容divのpaddingクラス再配置
   - **目的**: SafeArea対応を内容レベルで維持
   - **予想時間**: 10分

3. **モバイル動作確認**
   - **方法**: PlaywrightによるE2Eテスト実行
   - **対象**: iPhone/Android viewport
   - **予想時間**: 20分

### 🟡 中優先度タスク
4. **包括的レスポンシブテスト**
   - **対象**: sm, md, lg, xl各ブレークポイント
   - **確認項目**: 背景表示、レイアウト崩れ防止
   - **予想時間**: 15分

5. **ブラウザ互換性確認**
   - **対象**: Safari、Chrome、Firefox
   - **特別注意**: iOS SafariのSafeArea動作
   - **予想時間**: 15分

### 🟢 低優先度タスク
6. **実装ドキュメント更新**
   - **対象**: 修正内容の技術的詳細記録
   - **予想時間**: 10分

**総予想実装時間**: 85分

## ファイル変更計画

### 確実に修正するファイル
- **frontend/src/components/footer/Footer.tsx**
  - 行8周辺のクラス配置修正
  - footer要素への背景拡張追加

### 条件付き修正ファイル
- **frontend/src/styles/globals.css** (必要に応じて)
  - カスタムSafeAreaユーティリティクラス追加
  - 既存ユーティリティで対応可能な場合は修正不要

## テスト戦略

### Phase 1: 自動テスト (必須)
```typescript
// Playwright E2Eテスト項目
- モバイルviewportでのfooter背景確認
- SafeArea環境でのレイアウト検証
- 異なるscreen heightでの動作確認
```

### Phase 2: 手動確認 (必須)
- iPhone実機での確認 (Safari)
- Android実機での確認 (Chrome)
- URLバー非表示時の背景表示確認
- 画面回転時の動作確認

### Phase 3: 回帰テスト
- 既存ページでのfooter表示確認
- レスポンシブレイアウトの維持確認

## リスク管理

### 🔴 高リスク要因
1. **SafeArea対応の既存機能破綻**
   - **対策**: 段階的修正、即座テスト実行
   - **ロールバック**: Git revert準備

2. **他ページFooter表示への影響**
   - **対策**: Footer.tsx共通コンポーネント影響範囲事前調査
   - **検証**: 主要ページでの表示確認

### 🟡 中リスク要因
1. **レスポンシブデザインの部分的破綻**
   - **対策**: 各ブレークポイント個別テスト
   - **修正**: CSS微調整による対応

2. **ブラウザ固有の表示差異**
   - **対策**: iOS Safari重点検証
   - **フォールバック**: ブラウザ別CSS対応

### リスク軽減戦略
- **段階的実装**: 小さな変更から開始
- **包括的テスト**: 自動 + 手動テストの組み合わせ
- **即座復旧**: Git履歴による迅速ロールバック体制

## 実装成功基準

### 機能要件
✅ フッター背景が画面最下端まで表示される
✅ SafeArea内でのコンテンツ安全性維持
✅ URLバー変化時の適切な動作

### 非機能要件
✅ 既存レスポンシブデザインの維持
✅ 全ブラウザでの一貫した表示
✅ パフォーマンスへの影響なし

### 品質基準
✅ PlaywrightE2Eテスト全通過
✅ 手動テスト完全確認
✅ コードレビュー基準適合

## 実装後のフォローアップ

### 即座実施
- 実装結果のスクリーンショット記録
- テスト結果の詳細ログ保存
- ユーザフィードバック収集準備

### 長期監視
- 異なるデバイスでの継続確認
- ブラウザアップデート時の影響調査
- SafeArea仕様変更への対応検討

## 実装開始条件
- [x] 調査完了 (investigate_20250928_152345.md)
- [x] 実装計画策定完了 (本ファイル)
- [ ] 実装承認取得
- [ ] 開発環境準備確認

## 関連ドキュメント
- 調査報告書: docs/investigate/investigate_20250928_152345.md
- 実装詳細: (実装後に作成)
- テスト報告書: (テスト後に作成)