# ボタンコンポーネント統一化実装プラン

## 📋 プロジェクト概要
- **策定日時**: 2025年9月29日 17:00
- **目的**: 20箇所以上に散在する個別ボタン実装を統一し、保守性と開発効率を向上させる
- **期間**: 約2-3日
- **影響範囲**: frontend/src/components/Button/ および関連コンポーネント

## 🔍 現状分析結果

### 発見された課題
1. **個別実装の多発**: 20箇所以上でボタンが個別に実装
2. **統一性の欠如**: 似たような機能でもスタイルやパターンが不統一
3. **メンテナンス性の低下**: 共通の変更が困難で工数増大

### 既存コンポーネント分析
- **基本Button**: `Button.tsx` - variant（primary, secondary, outline, ghost）とsize（sm, md, lg）サポート
- **FilterToggleButton**: フィルター機能付き、アクティブ状態表示
- **ModalButton**: モーダル用、固定ゴールドカラー
- **SearchOptionsButton**: 検索オプション専用、アクティブ状態表示
- **Pagination**: 独自のページネーションボタン実装
- **CalendarHeader**: 前/次ボタンを個別実装

## 🏗️ アーキテクチャ設計

### 統一ボタンシステム構成
```
src/components/Button/
├── index.ts                    # エクスポート統一
├── BaseButton.tsx             # CVA拡張版基盤ボタン
├── IconButton.tsx             # アイコン付きボタン統一
├── NavigationButton.tsx       # ナビゲーション専用
├── StateButton.tsx            # アクティブ状態管理
└── variants/                  # 既存特殊ボタン
    ├── FilterToggleButton.tsx
    ├── ModalButton.tsx
    └── SearchOptionsButton.tsx
```

### 技術スタック活用
- **class-variance-authority (CVA)**: v0.7.1 - Variant Pattern実装
- **TailwindCSS**: v4.1.13 - 統一デザインシステム
- **lucide-react**: v0.542.0 - アイコン統一
- **TypeScript**: v5.9.2 - 型安全性確保

## 📅 実装フェーズ

### Phase 1: 基盤構築 (0.5日)
1. **BaseButton.tsx作成** - CVAを使用した拡張可能な基盤ボタン
2. **index.ts作成** - エクスポート統一管理

### Phase 2: 専用コンポーネント作成 (1日)
3. **IconButton.tsx** - lucide-reactアイコン統一対応
4. **NavigationButton.tsx** - 前/次/ページネーション統一
5. **StateButton.tsx** - アクティブ状態とカウンター表示

### Phase 3: 高頻度箇所移行 (0.5日)
6. **Pagination.tsx更新** - NavigationButton使用に移行
7. **CalendarHeader.tsx更新** - NavigationButton使用に移行

### Phase 4: 構造整理 (0.5日)
8. **variants/ディレクトリ作成** - 既存特殊ボタン移動
9. **import文更新** - 全プロジェクトのインポート統一

### Phase 5: テスト・検証 (0.5日)
10. **E2Eテスト実行** - Playwright使用
11. **ビジュアル確認** - デザイン一致性検証
12. **パフォーマンステスト** - バンドルサイズ確認

## 📁 ファイル変更計画

### 新規作成 (5ファイル)
- `frontend/src/components/Button/BaseButton.tsx` - CVA拡張基盤
- `frontend/src/components/Button/IconButton.tsx` - アイコンボタン統一
- `frontend/src/components/Button/NavigationButton.tsx` - ナビゲーション専用
- `frontend/src/components/Button/StateButton.tsx` - 状態管理付き
- `frontend/src/components/Button/index.ts` - エクスポート管理

### 修正対象 (3ファイル)
- `frontend/src/components/Navigation/Pagination.tsx` - NavigationButton使用
- `frontend/src/features/calendar/components/calender/internals/CalendarHeader.tsx` - NavigationButton使用
- `frontend/src/components/Button/Button.tsx` - BaseButtonエクスポート変更

### 移動対象 (3ファイル)
- `FilterToggleButton.tsx` → `variants/FilterToggleButton.tsx`
- `ModalButton.tsx` → `variants/ModalButton.tsx`
- `SearchOptionsButton.tsx` → `variants/SearchOptionsButton.tsx`

## 🧪 テスト戦略

### 1. ユニットテスト
- CVA variant適用確認
- Props渡し動作確認
- アクセシビリティ属性確認

### 2. E2Eテスト (Playwright)
- 主要ページ動作確認 (`http://localhost:3001`)
- ナビゲーション機能確認
- レスポンシブ対応確認

### 3. リグレッションテスト
- 既存機能の動作保証
- デザイン一致性確認
- パフォーマンス比較

## ⚠️ リスク分析と対策

### 主要リスク
1. **後方互換性破綻**: 既存import文の動作不良
2. **デザイン差異**: 統一化によるビジュアル変更
3. **パフォーマンス劣化**: バンドルサイズ増加

### 対策
1. **段階的移行**: 一度に全て変更せず、フェーズ分け実施
2. **エイリアス維持**: 既存コンポーネント名でのエクスポート継続
3. **テスト充実**: 各フェーズでの動作確認徹底

## 🎯 期待効果

### 定量的効果
- **メンテナンス工数**: 50%削減（類似機能の統一により）
- **開発速度**: 20%向上（共通コンポーネント利用により）
- **バグ発生率**: 30%削減（統一実装により）

### 定性的効果
- **デザイン統一性向上**: 一貫したユーザー体験
- **開発者体験向上**: 共通パターンの学習コスト削減
- **スケーラビリティ**: 新機能追加時の効率化

## 📋 成功基準
1. ✅ 既存機能の完全動作保証
2. ✅ Playwrightテスト100%パス
3. ✅ バンドルサイズ10%以内の増加
4. ✅ TypeScript型エラー0件

## 🔄 実装後の展開予定
1. **ドキュメント化**: Storybookでのコンポーネントガイド作成
2. **チーム共有**: 設計指針とベストプラクティスの文書化
3. **継続改善**: 使用状況のモニタリングと最適化

## 📞 次ステップ
実装フェーズに移行し、Phase 1のBaseButton.tsx作成から開始します。