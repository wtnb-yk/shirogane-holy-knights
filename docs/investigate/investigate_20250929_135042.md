# 文字色統一に関する調査結果

## 調査概要
- **調査日時**: 2025年9月29日 13:50
- **調査対象**: frontend/src/app/globals.cssの文字色定義統一
- **目的**: プロジェクト全体での文字色使用の統一とglobals.cssベースの統合

## 現在の状況

### globals.cssの既存文字色定義
```css
--color-text-primary: #1F2937;    /* メイン文字色 */
--color-text-secondary: #6B7280;  /* セカンダリ文字色 */
--color-text-tertiary: #9CA3AF;   /* 第三段階文字色 */
--color-text-inverse: #FFFFFF;    /* 反転文字色（白） */
--color-text-muted: #acabb2;      /* ミュート文字色 */
--color-text-light: #e5e7eb;      /* ライト文字色 */
```

### 既存アクセント色
```css
--color-accent-gold: #F6C794;
--color-accent-gold-hover: #F4B87D;
--color-accent-gold-light: #FEF3E2;
--color-accent-gold-dark: #D89C5B;
```

## 発見された問題点

### 1. 統一すべき汎用グレー色（13ファイルで使用）
- `text-gray-400` → `text-text-tertiary` への置換が必要
- `text-gray-500`, `text-gray-600` → `text-text-secondary` への置換が必要
- `text-gray-700`, `text-gray-800`, `text-gray-900` → `text-text-primary` への置換が必要

**対象ファイル一覧:**
1. `/src/components/Image/OptimizedImage.tsx`
2. `/src/features/songs/components/player/PlayerSection.tsx`
3. `/src/features/archives/components/cards/internals/ArchiveCardTags.tsx`
4. `/src/components/Navigation/Pagination.tsx`
5. `/src/components/Layout/PageTitle.tsx`
6. `/src/components/Layout/PageLayout.tsx`
7. `/src/components/Feedback/Toast.tsx`
8. `/src/components/Error/ErrorDisplay.tsx`
9. `/src/components/Error/ErrorBoundary.tsx`
10. `/src/features/calendar/components/calender/internals/CalendarGrid.tsx`
11. `/src/features/calendar/components/calender/internals/CalendarWeekHeader.tsx`
12. `/src/features/calendar/components/calender/internals/CalendarDateCell.tsx`
13. `/src/features/calendar/components/calender/internals/MobileDateSection.tsx`

### 2. 機能的状態色（未定義）
現在Tailwind標準色を直接使用しているが、globals.cssに定義すべき色：

- **エラー色**: `text-red-600`, `text-red-800`
- **成功色**: `text-green-600`, `text-green-800`
- **警告色**: `text-yellow-600`, `text-yellow-800`
- **情報色**: `text-blue-600`, `text-blue-800`
- **タイムアウト色**: `text-orange-600`

### 3. 特定用途色（未定義）
- **Pagination色**: `text-amber-700`, `text-amber-900`
- **カレンダー色**: `text-red-500`（日曜日）, `text-blue-500`（土曜日）

### 4. アクセント色（既に適切に使用）
- `text-accent-gold`, `text-accent-gold-dark` は既に統一済み

## 技術的制約・整合性

### 技術環境
- **TailwindCSS**: v4.1.13 （CSS変数ベースサポート）
- **Next.js**: v15.1.6 （問題なし）
- **既存システム**: CSS変数システムと完全互換

### リスク評価: 低
- 既存の色値を保持した置換のみ
- 段階的実装による影響範囲制御可能
- パフォーマンスへの影響は最小限

## 推奨実装方針

### 1. globals.css拡張（新しいCSS変数追加）
```css
/* 機能的な色 */
--color-text-danger: #DC2626;        /* text-red-600相当 */
--color-text-danger-dark: #991B1B;   /* text-red-800相当 */
--color-text-success: #059669;       /* text-green-600相当 */
--color-text-success-dark: #065F46;  /* text-green-800相当 */
--color-text-warning: #D97706;       /* text-yellow-600相当 */
--color-text-warning-dark: #92400E;  /* text-yellow-800相当 */
--color-text-info: #2563EB;          /* text-blue-600相当 */
--color-text-info-dark: #1E40AF;     /* text-blue-800相当 */

/* 特定用途色 */
--color-text-pagination-hover: #B45309;   /* text-amber-700相当 */
--color-text-pagination-active: #78350F;  /* text-amber-900相当 */
--color-text-sunday: #EF4444;             /* text-red-500相当 */
--color-text-saturday: #3B82F6;           /* text-blue-500相当 */
--color-text-timeout: #EA580C;            /* text-orange-600相当 */
```

### 2. 段階的実装計画
- **Phase 1**: 汎用グレー色の一括置換（13ファイル）
- **Phase 2**: 機能的状態色の統一（Toast、ErrorDisplay等）
- **Phase 3**: 特定用途色の統一（Pagination、Calendar等）

### 3. 動作確認方法
- Playwright MCPツールでE2E動作確認
- 各コンポーネントの見た目に変化がないことを確認

## 期待効果

1. **デザインシステムの一貫性向上**
   - 全体で統一された文字色定義
   - 将来的な色変更時の一元管理

2. **保守性の向上**
   - 色変更時は globals.css のみの修正で対応
   - コードの可読性とメンテナンス性向上

3. **開発効率の向上**
   - 色選択時の迷いを削減
   - 統一されたネーミング規則

## 次フェーズへの推奨事項

1. **実装推奨**: 調査完了。feature/text-color-unificationブランチでの実装を推奨
2. **優先度**: 中（破壊的変更なし、段階的実装可能）
3. **必要リソース**: 開発者1名、実装時間約2-3時間
4. **テスト方針**: Playwright MCPツールでの包括的E2E確認

## 調査完了判定
- 全ての文字色使用箇所を特定済み
- 技術的制約なし
- 実装方針確定
- リスク評価完了

**ステータス**: 調査完了（実装推奨）