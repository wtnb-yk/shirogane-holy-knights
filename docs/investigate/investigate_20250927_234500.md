# EventDetailModal 外部リンク改善調査

## 調査日時
2025-09-27 23:45:00

## 調査背景
EventDetailModalに配置されている「詳細はこちら」リンクの位置と外部リンクの見せ方について、より良いユーザビリティを実現するための改善案を検討する。

## 現状の問題点

### 現在の実装
- **場所**: EventDescriptionコンポーネント内で、説明文の末尾に右寄せテキストリンク
- **表示**: 「詳細はこちら」または「詳細を見る」のテキスト
- **スタイル**: LinkTextコンポーネント（text-accent-gold、ExternalLinkアイコン付き）

### 問題点
1. **視認性が低い**: 説明文に埋もれてしまい、リンクの存在に気づきにくい
2. **クリック領域が小さい**: テキストリンクのみでタップしづらい
3. **位置の一貫性不足**: モーダル内のアクションとして適切な配置ではない
4. **デザインの洗練度**: 現代的なUIパターンから外れている

## 検討した選択肢

### 1. タイトル横のスマートアクション（推奨）
- タイトル右側にExternalLinkアイコンボタンを配置
- 省スペースかつ目立つ位置
- 例: Twitter/Xのツイート詳細、多くのSNSアプリ

### 2. 画像上にオーバーレイボタン
- EventImageの右上/右下に半透明ボタン
- ビジュアル重視のデザイン
- 例: Instagram、Pinterest

### 3. 説明文の中にインラインリンク（現在）
- 説明文末尾のテキストリンク
- 控えめだが見逃しやすい

### 4. モーダル下部にフローティングアクションボタン
- 常に表示される固定ボタン
- 例: Google Maps、Airbnb

### 5. モーダル下部にボタンエリア
- SearchOptionsModalと同じパターン
- 明確で分かりやすい

### 6. カード形式での表示
- AlbumPlatformLinksのようなリッチな表示
- プラットフォーム別の表示可能

### 7. ヘッダーエリアにアクションボタン
- モーダルタイトル部分に配置
- 例: Slack、Notion

## 推奨実装案: タイトル横スマートアクション

### 設計詳細

#### レイアウト構造
```
┌─────────────────────────────────────────┐
│ イベントタイトル              [🔗] [×] │
│ ━━━━━━━━━━━━━━                         │
│ [Badge1] [Badge2]                       │
└─────────────────────────────────────────┘
```

#### 実装コンポーネント
1. **EventTitle.tsx の拡張**
   - flexレイアウトでタイトルとアクションを配置
   - アクションボタン用のスロットを追加

2. **EventExternalLinkButton.tsx（新規）**
   - ExternalLinkアイコンボタン
   - Tooltip付き（「詳細を見る」）
   - ホバーエフェクト実装

3. **EventDescription.tsx の簡素化**
   - 外部リンク表示ロジックを削除
   - 純粋な説明文表示のみ

### スタイリング仕様
- **サイズ**: 44x44px のクリック領域（アクセシビリティ基準）
- **通常時**: 透明背景、text-text-secondary
- **ホバー時**: bg-surface-hover、text-accent-gold
- **フォーカス時**: ring-2 ring-accent-gold
- **トランジション**: transition-all duration-200

### レスポンシブ対応
- デスクトップ: アイコンのみ + Tooltip
- モバイル: 同様のアイコン表示（BottomSheetでも統一）

## 技術的制約と考慮事項

### 利用可能なコンポーネント
- Button、ModalButton（既存のボタンコンポーネント）
- LinkText（現在使用中）
- ResponsiveModal、Modal、BottomSheet（モーダルシステム）
- lucide-react のアイコンライブラリ

### 既存パターンとの整合性
- SearchOptionsModal: 下部中央配置のModalButton
- AlbumPlatformLinks: カード形式のリンク表示
- NewsCard: カード全体をクリック可能
- ModalHeader: 既存のヘッダー構造との統合

## 期待される効果

1. **視認性向上**: ヘッダー部分で常に目につく位置
2. **操作性向上**: 大きなクリック領域、明確なインタラクション
3. **デザイン統一**: モーダルヘッダーの標準的なアクション配置
4. **拡張性**: 将来的な機能追加（URLタイプ別アイコン等）に対応
5. **アクセシビリティ**: キーボード操作、スクリーンリーダー対応

## 実装ファイル

### 修正対象
- `frontend/src/features/calendar/components/modals/internals/EventTitle.tsx`
- `frontend/src/features/calendar/components/modals/internals/EventDescription.tsx`
- `frontend/src/features/calendar/components/modals/EventDetailModal.tsx`

### 新規作成
- `frontend/src/features/calendar/components/modals/internals/EventExternalLinkButton.tsx`

## 次フェーズへの推奨

### PLANフェーズでの実装計画
1. EventExternalLinkButtonコンポーネントの詳細設計
2. EventTitleレイアウトの拡張設計
3. アニメーション・インタラクションの詳細仕様
4. テスト計画の策定

### 将来の拡張案
- URLタイプ検出によるアイコン・ラベル変更
  - YouTube: 「動画を見る」
  - Google Maps: 「会場を見る」
  - チケットサイト: 「チケット購入」
- 複数の外部リンク対応
- シェア機能の追加

## まとめ
EventDetailModalの外部リンク表示を「タイトル横のスマートアクション」として実装することで、視認性・操作性・デザインの洗練度を大幅に向上させることが可能。既存のコンポーネント構造を活用しながら、最小限の変更で最大の効果を得られる実装案となっている。